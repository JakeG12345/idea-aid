{% extends "layout.html" %}

{% block title %}
Saved
{% endblock %}

{% block main %}
<div>
    <h1>Your Saved Ideas</h1>
    <div style="width: 700px; margin: auto;">
        <table class="table" id="stockTable">
            <thead>
                <tr>
                    <th scope="col">Title</th>
                    <th scope="col">Date</th>
                    <th scope="col">Expand</th>
                </tr>
            </thead>
            <tbody>
                {% for idea in ideas %}
                    <tr data-name="{{ idea.title }}">
                        <td>{{ idea.title }}</td>
                        <td>{{ idea.date_edited }}</td>
                        <td class="expand" data-name="{{ idea.title }}">&rarr;</td>
                    </tr>
                {% endfor %}
                <script>
                    document.addEventListener("DOMContentLoaded", (event) => {
                        document.body.addEventListener('click', function (event) {
                            else if (event.target.matches('td.expand')) {
                                var form = document.createElement('form');
                                form.method = 'post';
                                form.action = "/expand";
                                var input = document.createElement('input');
                                input.type = 'hidden';
                                input.name = 'idea';
                                input.value = event.target.dataset.name;
                                form.appendChild(input);
                                document.body.appendChild(form);
                                form.submit();
                            }
                        });
                    });
                </script>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}